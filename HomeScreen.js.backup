import React, { useRef, useState, useEffect, use } from 'react';

import { View, Text, StyleSheet, ScrollView, TouchableOpacity, Image, ImageBackground, useWindowDimensions, ActivityIndicator, Modal, Animated, TouchableWithoutFeedback, TextInput, StatusBar, SafeAreaView } from 'react-native';

import DateTimePicker from "@react-native-community/datetimepicker";
import Banner from './(component)/Banner';
import Toptrending from './(component)/toptrending';
import LogoTheTrago from './(component)/Logo';
import { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';
import { useCustomer } from './(Screen)/CustomerContext';
import { CalendarList } from 'react-native-calendars';
import styles from './(CSS)/HomeScreenStyles';
import * as SecureStore from 'expo-secure-store';
import { LinearGradient } from 'expo-linear-gradient';
import ipAddress from './ipconfig';
import { Easing } from 'react-native';
import { Ionicons, MaterialIcons, FontAwesome5 } from '@expo/vector-icons'; // ใช้ไอคอนจาก expo
import { BlurView } from 'expo-blur';



const data = [
  { id: '1', title: 'Ferry', icon: 'boat', navigate: 'SearchFerry', item: 'new' },
  { id: '2', title: 'Flights', icon: 'airplane', navigate: 'SearchFerryDemo', item: '' },
  { id: '3', title: 'Trains', icon: 'train', navigate: '', item: '' },
  { id: '4', title: 'Cars', icon: 'car', navigate: '', item: '' },
  { id: '5', title: 'Hotel', icon: 'bed', navigate: '', item: '' },
  { id: '6', title: 'Tours', icon: 'map', navigate: '', item: '' },
  { id: '7', title: 'Attraction', icon: 'star', navigate: '', item: '' },
  { id: '8', title: 'Ticket', icon: 'ticket', navigate: '', item: '' },
];

const placeholders = [
  [
    { text: 'The ', color: '#fff' },
    { text: 'journey ', color: 'rgb(255, 166, 0)' },
    { text: 'is endless, Book now', color: '#fff' },
  ],
  [
    { text: 'Planning for a ', color: '#fff' },
    { text: 'trip? ', color: 'rgb(255, 166, 0)' },
  ],
  [
    { text: 'We will organize your ', color: '#fff' },
    { text: 'best trip', color: 'rgb(255, 166, 0)' },
  ],
  [
    { text: 'With the ', color: '#fff' },
    { text: 'best destination', color: 'rgb(255, 166, 0)' },
  ],
  [
    { text: 'And within the ', color: '#fff' },
    { text: 'best budgets!', color: 'rgb(255, 166, 0)' },
  ],
];




const HomeScreen = ({ navigation }) => {
  const [activeCountry, setActiveCountry] = useState(null);
  const [activeattraction, setActiveattraction] = useState(null);
  const [startingPoint, setStartingPoint] = useState({ id: '0', name: 'Starting Point' });
  const [endPoint, setEndPoint] = useState({ id: '0', name: 'Destination' });
  const [departureDate, setDepartureDate] = useState(() => {
    const tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    return tomorrow;
  });

  const [returnDate, setReturnDate] = useState(() => {
    const returnDay = new Date(departureDate);
    returnDay.setDate(returnDay.getDate() + 1);
    return returnDay;
  });

  const scaleAnim = useState(new Animated.Value(1))[0];

  const [isLoading, setIsLoading] = useState(false);
  const [isModalVisible, setIsModalVisible] = useState(false);
  const { customerData, updateCustomerData } = useCustomer();
  const [tripType, setTripType] = useState("One Way Trip");
  const [showModal, setShowModal] = useState(false);
  const [calendarStartDate, setCalendarStartDate] = useState(new Date().toISOString().split('T')[0]); // string
  const [calendarEndDate, setCalendarEndDate] = useState(new Date().toISOString().split('T')[0]); // string

  const [profileImage, setProfileImage] = useState(null);
  const [calendarMarkedDates, setCalendarMarkedDates] = useState({});
  const [token, setToken] = useState(null);
  const [user, setUser] = useState([]);
  const [countrie, setcountrie] = useState([]);
  const iconAnim = useRef(new Animated.Value(0)).current; // สำหรับ opacity และ scale
  const bounceAnim = useRef(new Animated.Value(0)).current;
  const slideX = useRef(new Animated.Value(-100)).current;
  const [index, setIndex] = useState(0);
  const translateY = useRef(new Animated.Value(0)).current;
  const [searchText, setSearchText] = useState('');
  const bounceAnim2 = useRef(new Animated.Value(0)).current;
  const [poppularroute, setPoppularRoute] = useState([]);
  const [visibleRoutes, setVisibleRoutes] = useState(6);
  const [visibleAttraction, setvisibleAttraction] = useState(6);
  const scrollViewRef = useRef(null);
  const { width: screenWidth } = useWindowDimensions();
  const [currentBanner, setCurrentBanner] = useState(0);
  const [toptrending, setToptrending] = useState([]);
  const [attraction, setActtraction] = useState([]);
  const [poppularAttraction, setPoppularAttraction] = useState([]);
  const shimmerAnim = useRef(new Animated.Value(-300)).current;
  const [loadedIndexes, setLoadedIndexes] = useState([]);
  const [isLoadingTitle, setIsLoadingTitle] = useState(true);

  // Reduced particles count for cleaner look
  const floatingAnims = useRef([...Array(8)].map(() => new Animated.Value(0))).current;

  useEffect(() => {
    const timer = setTimeout(() => setIsLoadingTitle(false), 1500); // จำลองโหลด
    return () => clearTimeout(timer);
  }, []);

  useEffect(() => {
    Animated.loop(
      Animated.timing(shimmerAnim, {
        toValue: 300,
        duration: 1600,
        easing: Easing.inOut(Easing.ease),
        useNativeDriver: true,
      })
    ).start();
  }, []);

  // Improved floating animation with slower, more natural movement
  useEffect(() => {
    floatingAnims.forEach((anim, index) => {
      Animated.loop(
        Animated.sequence([
          Animated.timing(anim, {
            toValue: 1,
            duration: 4000 + Math.random() * 2000,
            useNativeDriver: true,
            easing: Easing.inOut(Easing.ease),
          }),
          Animated.timing(anim, {
            toValue: 0,
            duration: 4000 + Math.random() * 2000,
            useNativeDriver: true,
            easing: Easing.inOut(Easing.ease),
          }),
        ])
      ).start();
    });
  }, []);

  const formatDecimal = (number) => {
    return Number(number).toFixed(1);
  };


  useEffect(() => {
    fetch(`${ipAddress}/toptrending`)
      .then((response) => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then((data) => {
        if (data && Array.isArray(data.data)) {
          setToptrending(data.data);

        } else {
          console.error('Data is not an array', data);
          setToptrending([]);
        }
      })
      .catch((error) => {
        console.error('Error fetching data:', error);
      });
  }, []);

  function formatNumberWithComma(value) {
    if (!value) return "0.00";
    const formattedValue = Number(value).toLocaleString("en-US", {
      minimumFractionDigits: 0,
      maximumFractionDigits: 2
    });


    return formattedValue;
  }

  useEffect(() => {
    fetch(`${ipAddress}/attraction`)
      .then((response) => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then((data) => {
        if (data && Array.isArray(data.data)) {
          setActtraction(data.data);
          setActiveattraction(data.data[0].md_province_id);
        } else {
          console.error('Data is not an array', data);
          setActtraction([]);
        }
      })
      .catch((error) => {
        console.error('Error fetching data:', error);
      });
  }, []);

  useEffect(() => {
    if (!toptrending.length) return;

    const interval = setInterval(() => {
      const nextIndex = (currentBanner + 1) % toptrending.length;
      setCurrentBanner(nextIndex);
      scrollViewRef.current?.scrollTo({
        x: nextIndex * screenWidth,
        animated: true,
      });
    }, 3000);

    return () => clearInterval(interval);
  }, [currentBanner, screenWidth, toptrending.length]);


  useEffect(() => {
    const interval = setInterval(() => {
      // Animate ขึ้นไปก่อน
      Animated.timing(translateY, {
        toValue: -70,
        duration: 550,
        useNativeDriver: true,
      }).start(() => {
        // เมื่อเลื่อนขึ้นสุดแล้ว เปลี่ยนข้อความ
        setIndex((prev) => (prev + 1) % placeholders.length);

        // ดึงกลับล่างทันทีแบบไม่เห็น
        translateY.setValue(60);

        // แล้ว animate กลับมาที่ 0
        Animated.timing(translateY, {
          toValue: 0,
          duration: 550,
          useNativeDriver: true,
        }).start();
      });
    }, 3000);

    return () => clearInterval(interval);
  }, []);

  const loadMoreRoutes = () => {
    if (visibleRoutes < poppularroute.length) {
      setVisibleRoutes(prev => prev + 6);
    }
  };


  useEffect(() => {
    Animated.loop(
      Animated.sequence([
        Animated.timing(bounceAnim2, {
          toValue: -4, // ⬆ ขึ้น
          duration: 700,
          easing: Easing.inOut(Easing.quad),
          useNativeDriver: true,
        }),
        Animated.timing(bounceAnim2, {
          toValue: 4,  // ⬇ ลง
          duration: 700,
          easing: Easing.inOut(Easing.quad),
          useNativeDriver: true,
        }),
      ])
    ).start();
  }, []);

  useEffect(() => {
    Animated.timing(slideX, {
      toValue: 0,
      duration: 500,
      useNativeDriver: true,
    }).start();
  }, []);


  useEffect(() => {
    Animated.timing(iconAnim, {
      toValue: 1,
      duration: 800,
      useNativeDriver: true,
    }).start();
  }, []);


  useEffect(() => {
    Animated.loop(
      Animated.timing(bounceAnim, {
        toValue: 1,
        duration: 2000,
        easing: Easing.inOut(Easing.sin), // ✅ ลื่นและ smooth
        useNativeDriver: true,
      })
    ).start();
  }, []);

  const translateX = bounceAnim.interpolate({
    inputRange: [0, 0.25, 0.5, 0.75, 1],
    outputRange: [-10, 0, 15, 0, -10], // ⬅➡⬅
  });
  const bounceY = bounceAnim.interpolate({
    inputRange: [0, 0.25, 0.5, 0.75, 1],
    outputRange: [-5, 0, 5, 0, -5],
  });



  // ฟังก์ชันสำหรับเลือกวัน
  const onCalendarDayPress = (day) => {
    if (!calendarStartDate || calendarEndDate) {
      setCalendarStartDate(day.dateString);
      setCalendarEndDate(null);
      setCalendarMarkedDates({
        [day.dateString]: {
          startingDay: true,
          color: '#FD501E',
          textColor: 'white',
        },
      });
    } else {
      const range = getMarkedDatesRange(calendarStartDate, day.dateString);
      setCalendarEndDate(day.dateString);
      setCalendarMarkedDates(range);
    }
  };

  const getMarkedDatesRange = (start, end) => {
    let dates = {};
    let current = new Date(start);
    const last = new Date(end);

    while (current <= last) {
      const dateStr = current.toISOString().split('T')[0];
      dates[dateStr] = {
        color: '#FD501E',
        textColor: 'white',
      };
      if (dateStr === start) dates[dateStr].startingDay = true;
      if (dateStr === end) dates[dateStr].endingDay = true;
      current.setDate(current.getDate() + 1);
    }
    return dates;
  };


  // const handleCalendarConfirm = () => {
  //   if (tripType === 'One Way Trip' && calendarStartDate) {
  //     console.log('Selected Departure Date:', calendarStartDate);
  //     setDepartureDate(new Date(calendarStartDate));
  //     setShowModal(false);
  //   } else if (tripType === 'Return Trip' && calendarStartDate && calendarEndDate) {
  //     setDepartureDate(new Date(calendarStartDate));
  //     setReturnDate(new Date(calendarEndDate));
  //     setShowModal(false);
  //   } else {
  //     alert('กรุณาเลือกวันที่ให้ครบ');
  //   }
  // };



  // const formatDate = (date) => {
  //   if (!date) return ""; // ตรวจสอบว่ามีค่า date หรือไม่
  //   return new Date(date).toLocaleDateString("en-GB", {
  //     day: "2-digit",
  //     month: "short",
  //     year: "numeric",
  //   });
  // };





  // const swapPoints = () => {
  //   setStartingPoint((prev) => endPoint);
  //   setEndPoint((prev) => startingPoint);
  // };

  const truncateText = (text, maxLength = 20) => {
    if (text.length > maxLength) {
      return text.slice(0, maxLength) + '...';
    }
    return text;
  };

  useEffect(() => {
    const checkLoginStatus = async () => {
      const storedToken = await SecureStore.getItemAsync('userToken'); // ตรวจสอบ token
      setToken(storedToken); // อัปเดตสถานะ token

      if (!storedToken) {
        // หากไม่มี token, นำทางไปที่หน้า LoginScreen
        navigation.replace('LoginScreen');
      } else {

        setIsLoading(false); // หยุดการโหลดหลังจากตรวจสอบเสร็จ
        // console.log(user); // แสดง token ใน console

      }
    };
    checkLoginStatus(); // เรียกใช้เมื่อหน้าโหลด


  }, []); // ใช้ navigation เป็น dependency เพื่อให้ useEffect ทำงานเมื่อคอมโพเนนต์โหลด

  useEffect(() => {

    const fetchData = async () => {
      try {
        const response = await fetch(`${ipAddress}/profile`, {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${token}`, // ส่ง Token ใน Authorization header
            'Content-Type': 'application/json', // ระบุประเภทของข้อมูลที่ส่ง (ถ้าจำเป็น)
          },
        });

        if (!response.ok) {
          throw new Error('Network response was not ok');
        }

        const data = await response.json();

        if (data && Array.isArray(data.data)) {
          setUser(data.data);
          updateCustomerData({
            Firstname: data.data[0].md_member_fname,
            Lastname: data.data[0].md_member_lname,
            email: data.data[0].md_member_email,
          });
          console.log('name:' + customerData.Firstname);
        } else {
          console.error('Data is not an array', data);
          setUser([]);
        }
      } catch (error) {
        console.error('Error fetching data:', error);
      } finally {
        setIsLoading(false);  // ตั้งค่า loading เป็น false หลังจากทำงานเสร็จ
      }
    };
    if (token) {
      fetchData();
    }

  }, [token]);




  useEffect(() => {

    const fetchData = async () => {
      const storedToken = await SecureStore.getItemAsync('userToken');
      try {
        const response = await fetch(`${ipAddress}/profile`, {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${storedToken}`, // ส่ง Token ใน Authorization header
            'Content-Type': 'application/json', // ระบุประเภทของข้อมูลที่ส่ง (ถ้าจำเป็น)
          },
        });

        if (!response.ok) {
          throw new Error('Network response was not ok');
        }

        const data = await response.json();

        if (data && Array.isArray(data.data)) {

          // setUser(data.data);
          updateCustomerData({
            Firstname: data.data[0].md_member_fname,

            Lastname: data.data[0].md_member_lname,
            email: data.data[0].md_member_email,
            tel: data.data[0].md_member_phone
          });

          if (data.data[0].md_member_phone) {
            updateCustomerData({
              tel: data.data[0].md_member_phone,
            });
          }
          if (data.data[0].md_member_code) {
            getCountryByCode(data.data[0].md_member_code);

          }
          //  console.log('name:'+customerData.Firstname);

        } else {
          console.error('Data is not an array', data);
        }
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    };


    fetchData();



  }, []);

  const getCountryByCode = async (code) => {
    try {
      const response = await fetch(`${ipAddress}/membercountry`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ countrycode: code }),
      });

      const json = await response.json();


      if (response.ok) {
       
        updateCustomerData({
          selectcoountrycode: `(+${json.data[0].sys_countries_telephone}) ${json.data[0].sys_countries_nameeng}`,
          country: json.data[0].sys_countries_code,
          countrycode: json.data[0].sys_countries_telephone,
        });
        return json.data;
      } else {
        console.warn('Not found or error:', json.message);
        return null;
      }
    } catch (error) {
      console.error('Error fetching country:', error);
      return null;
    }
  };

  useEffect(() => {

    const fecthpoppularattraction = async (provid) => {
      try {
        const response = await fetch(`${ipAddress}/poppularattraction`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ md_tour_provid: provid }),
        });

        const json = await response.json();


        if (response.ok) {
          setPoppularAttraction(json.data);
         
          return json.data;
        } else {
          console.warn('Not found or error:', json.message);
          setPoppularAttraction([]);
          return null;
        }
      } catch (error) {
        console.error('Error fetching country:', error);
        return null;
      }
    };
    fecthpoppularattraction(activeattraction);
  }, [activeattraction]);

  useEffect(() => {
    const fecthpoppularRoute = async (countrieid) => {
      try {
        const response = await fetch(`${ipAddress}/poppularroute`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ sys_countries_id: countrieid }),
        });

        const json = await response.json();


        if (response.ok) {
   
          setPoppularRoute(json.data);
       
          return json.data;
        } else {
          console.warn('Not found or error:', json.message);
          setPoppularRoute([]);
          return null;
        }
      } catch (error) {
        console.error('Error fetching country:', error);
        return null;
      }
    };
    fecthpoppularRoute(activeCountry);
  }, [activeCountry]);

  useEffect(() => {
    fetch(`${ipAddress}/countriespop`)
      .then((response) => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then((data) => {
        if (data && Array.isArray(data.data)) {
          setcountrie(data.data);
          setActiveCountry(data.data[0].sys_countries_id);
        } else {
          console.error('Data is not an array', data);
          setcountrie([]);
        }
      })
      .catch((error) => {
        console.error('Error fetching data:', error);
      }).finally(() => {
        setLoading(false);  // ตั้งค่า loading เป็น false หลังจากทำงานเสร็จ
      });
  }, []);


  return (
    <SafeAreaView style={premiumStyles.container}>
      <StatusBar barStyle="light-content" backgroundColor="transparent" translucent />
      
      {/* Premium Background with Elegant Gradient */}
      <View style={premiumStyles.backgroundContainer}>
        <LinearGradient
          colors={['#FD501E', '#FF6B35', '#FF8956', '#FFA072']}
          style={StyleSheet.absoluteFillObject}
          start={{ x: 0, y: 0 }}
          end={{ x: 1, y: 1 }}
        />
        
        {/* Subtle Floating Particles */}
        <View style={premiumStyles.particlesContainer}>
          {[...Array(8)].map((_, i) => (
            <Animated.View
              key={`particle-${i}`}
              style={[
                premiumStyles.particle,
                {
                  left: `${15 + (i * 12)}%`,
                  top: `${10 + (i * 8)}%`,
                  transform: [
                    {
                      translateY: floatingAnims[i % floatingAnims.length].interpolate({
                        inputRange: [0, 1],
                        outputRange: [0, 15],
                      }),
                    },
                    {
                      scale: floatingAnims[i % floatingAnims.length].interpolate({
                        inputRange: [0, 0.5, 1],
                        outputRange: [0.7, 1, 0.7],
                      }),
                    },
                  ],
                  opacity: floatingAnims[i % floatingAnims.length].interpolate({
                    inputRange: [0, 0.5, 1],
                    outputRange: [0.2, 0.4, 0.2],
                  }),
                },
              ]}
            />
          ))}
        </View>

        {/* Minimalist Decorative Elements */}
        <View style={premiumStyles.geometricShapes}>
          <Animated.View style={[premiumStyles.shape1, {
            transform: [{
              rotate: bounceAnim.interpolate({
                inputRange: [0, 1],
                outputRange: ['0deg', '180deg'],
              })
            }]
          }]}>
            <MaterialIcons name="waves" size={wp('6%')} color="rgba(255,255,255,0.15)" />
          </Animated.View>
          
          <Animated.View style={[premiumStyles.shape2, {
            transform: [{
              scale: bounceAnim.interpolate({
                inputRange: [0, 1],
                outputRange: [0.9, 1.1],
              })
            }]
          }]}>
            <FontAwesome5 name="anchor" size={wp('4.5%')} color="rgba(255,255,255,0.12)" />
          </Animated.View>
        </View>
      </View>

      {isLoading && (
        <View style={premiumStyles.loadingContainer}>
          <BlurView intensity={100} tint="dark" style={premiumStyles.loadingBlur}>
            <View style={premiumStyles.loadingContent}>
              <Animated.View style={[premiumStyles.loadingSpinner, {
                transform: [{ rotate: bounceAnim.interpolate({
                  inputRange: [0, 1],
                  outputRange: ['0deg', '360deg'],
                })}]
              }]}>
                <LinearGradient
                  colors={['#FD501E', '#FF6B35']}
                  style={premiumStyles.loadingGradient}
                >
                  <MaterialIcons name="directions-boat" size={wp('10%')} color="#fff" />
                </LinearGradient>
              </Animated.View>
              <Text style={premiumStyles.loadingText}>Processing Payment...</Text>
              <Text style={premiumStyles.loadingSubtext}>Please wait a moment</Text>
            </View>
          </BlurView>
        </View>
      )}

      <ScrollView 
        contentContainerStyle={premiumStyles.scrollContainer}
        showsVerticalScrollIndicator={false}
        bounces={true}
      >

        {/* Refined Header Section with Better Spacing */}
        <View style={premiumStyles.headerSection}>
          <BlurView intensity={60} tint="light" style={premiumStyles.headerBlur}>
            <LinearGradient
              colors={['rgba(255,255,255,0.92)', 'rgba(255,255,255,0.88)']}
              style={premiumStyles.headerGradient}
            >
              {/* Header Content */}
              <View style={premiumStyles.headerContent}>
                {/* Empty left space for balance */}
           
                
                {/* Centered Logo */}
                <View style={premiumStyles.logoContainer}>
                  <Animated.View style={[premiumStyles.logoWrapper, {
                    transform: [{ scale: scaleAnim }]
                  }]}>
                    <LogoTheTrago />
                  </Animated.View>
                  
                  {/* Subtle Premium Badge */}
                  <Animated.View style={[premiumStyles.premiumBadge, {
                    transform: [{ translateY: bounceAnim2.interpolate({
                      inputRange: [0, 1],
                      outputRange: [0, -3],
                    })}]
                  }]}>
                    <LinearGradient
                      colors={['#FFD700', '#FF8C42']}
                      style={premiumStyles.badgeGradient}
                    >
                      <MaterialIcons name="star" size={wp('2.5%')} color="#fff" />
                      <Text style={premiumStyles.badgeText}>Premium</Text>
                    </LinearGradient>
                  </Animated.View>
                </View>

                {/* Profile Action - moved to right */}
                <View style={premiumStyles.headerActionsRight}>
                  <TouchableOpacity style={premiumStyles.profileButton}>
                    <BlurView intensity={40} style={premiumStyles.actionButtonBlur}>
                      <MaterialIcons name="account-circle" size={wp('5.5%')} color="#FD501E" />
                    </BlurView>
                  </TouchableOpacity>
                </View>
              </View>

              {/* Simplified Search Section */}
              <View style={premiumStyles.searchSection}>
                {isLoadingTitle ? (
                  <View style={premiumStyles.searchSkeleton}>
                    <Animated.View style={[premiumStyles.shimmerEffect, {
                      transform: [{ translateX: shimmerAnim }],
                    }]}>
                      <LinearGradient
                        colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                        start={[0, 0]}
                        end={[1, 0]}
                        style={premiumStyles.shimmerGradient}
                      />
                    </Animated.View>
                  </View>
                ) : (
                  <BlurView intensity={30} tint="light" style={premiumStyles.searchContainer}>
                    <LinearGradient
                      colors={['rgba(253,80,30,0.08)', 'rgba(255,107,53,0.04)']}
                      style={premiumStyles.searchGradient}
                    >
                      <View style={premiumStyles.searchIconContainer}>
                        <MaterialIcons name="search" size={wp('5.5%')} color="#FD501E" />
                      </View>

                      <View style={premiumStyles.searchInputContainer}>
                        {searchText === '' && (
                          <Animated.Text style={[premiumStyles.searchPlaceholder, {
                            transform: [{ translateY }],
                          }]}>
                            {placeholders[index].map((part, i) => (
                              <Text
                                key={`${i}-${part.text}`}
                                style={[premiumStyles.placeholderText, {
                                  color: part.color === '#fff' ? '#555' : '#FD501E',
                                  fontWeight: part.bold ? 'bold' : '500',
                                }]}
                              >
                                {part.text}
                              </Text>
                            ))}
                          </Animated.Text>
                        )}

                        <TextInput
                          value={searchText}
                          onChangeText={setSearchText}
                          style={premiumStyles.searchInput}
                          placeholder=""
                          placeholderTextColor="transparent"
                        />
                      </View>

                      <TouchableOpacity style={premiumStyles.filterButton}>
                        <MaterialIcons name="tune" size={wp('4.5%')} color="#FD501E" />
                      </TouchableOpacity>
                    </LinearGradient>
                  </BlurView>
                )}
              </View>
            </LinearGradient>
          </BlurView>
        </View>
        {/* Enhanced Services Grid with Better Balance */}
        <View style={premiumStyles.servicesSection}>
          <Animated.View style={[premiumStyles.servicesContainer, {
            opacity: iconAnim,
            transform: [{
              scale: iconAnim.interpolate({
                inputRange: [0, 1],
                outputRange: [0.95, 1],
              }),
            }, {
              translateY: iconAnim.interpolate({
                inputRange: [0, 1],
                outputRange: [20, 0],
              }),
            }],
          }]}>
            <BlurView intensity={70} tint="light" style={premiumStyles.servicesBlur}>
              <LinearGradient
                colors={['rgba(255,255,255,0.93)', 'rgba(255,250,246,0.90)']}
                style={premiumStyles.servicesGradient}
              >
                {/* Refined Section Title */}
                <View style={premiumStyles.servicesTitleContainer}>
                  <Text style={premiumStyles.servicesTitle}>Our Services</Text>
                  <Text style={premiumStyles.servicesSubtitle}>Choose your perfect journey</Text>
                </View>

                {/* Improved Services Grid */}
                <View style={premiumStyles.servicesGrid}>
                  {(isLoadingTitle ? Array(8).fill(null) : data).map((item, index) => (
                    <View key={item?.id || `skeleton-${index}`} style={premiumStyles.serviceItemContainer}>
                      {isLoadingTitle ? (
                        <View style={premiumStyles.serviceSkeleton}>
                          <View style={premiumStyles.serviceSkeletonIcon}>
                            <Animated.View style={[premiumStyles.shimmerEffect, {
                              transform: [{ translateX: shimmerAnim }],
                            }]}>
                              <LinearGradient
                                colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                                start={[0, 0]}
                                end={[1, 0]}
                                style={premiumStyles.shimmerGradient}
                              />
                            </Animated.View>
                          </View>
                          <View style={premiumStyles.serviceSkeletonText}>
                            <Animated.View style={[premiumStyles.shimmerEffect, {
                              transform: [{ translateX: shimmerAnim }],
                            }]}>
                              <LinearGradient
                                colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                                start={[0, 0]}
                                end={[1, 0]}
                                style={premiumStyles.shimmerGradient}
                              />
                            </Animated.View>
                          </View>
                        </View>
                      ) : (
                        <TouchableOpacity
                          style={premiumStyles.serviceItem}
                          onPress={() => {
                            if (item.id === '1') {
                              updateCustomerData({
                                startingPointId: '0',
                                startingpoint_name: 'Starting Point',
                                endPointId: '0',
                                endpoint_name: 'Destination',
                              });
                            }
                            if (item.navigate) {
                              navigation.navigate(item.navigate);
                            } else {
                              alert('Coming soon...');
                            }
                          }}
                        >
                          <BlurView intensity={40} style={premiumStyles.serviceItemBlur}>
                            <LinearGradient
                              colors={index % 2 === 0 
                                ? ['rgba(253,80,30,0.06)', 'rgba(255,107,53,0.03)']
                                : ['rgba(255,107,53,0.06)', 'rgba(253,80,30,0.03)']
                              }
                              style={premiumStyles.serviceItemGradient}
                            >
                              {item.item && (
                                <Animated.View style={[premiumStyles.serviceBadge, {
                                  transform: [{ translateY: bounceAnim.interpolate({
                                    inputRange: [0, 0.25, 0.5, 0.75, 1],
                                    outputRange: [-2, 0, 2, 0, -2],
                                  })}],
                                }]}>
                                  <LinearGradient
                                    colors={['#FF4444', '#FF6666']}
                                    style={premiumStyles.badgeGradient}
                                  >
                                    <Text style={premiumStyles.badgeText}>{item.item}</Text>
                                  </LinearGradient>
                                </Animated.View>
                              )}
                              
                              <View style={premiumStyles.serviceIconContainer}>
                                <Ionicons name={item.icon} size={wp('6.5%')} color="#FD501E" />
                              </View>
                              
                              <Text style={premiumStyles.serviceItemText}>{item.title}</Text>
                              
                              {/* Subtle Hover Indicator */}
                              <View style={premiumStyles.hoverIndicator} />
                            </LinearGradient>
                          </BlurView>
                        </TouchableOpacity>
                      )}
                    </View>
                  ))}
                </View>
              </LinearGradient>
            </BlurView>
          </Animated.View>
        </View>




        {/* <View style={styles.tabContainer}>

        {['Ferry', 'Flight', 'Car', 'Hotel'].map(tab => (
          <View
            key={tab}
            style={[styles.tabOuter, activeTab === tab ? styles.tabActiveOuter : styles.tabInactiveOuter]}
          >
            <TouchableOpacity
              style={activeTab === tab ? styles.tabActive : styles.tabInactive}
              onPress={() => setActiveTab(tab)}
            >
              <Text
                style={activeTab === tab ? styles.tabTextActive : styles.tabTextInactive}
              >
                {tab}
              </Text>
            </TouchableOpacity>
          </View>
        ))}
      </View> */}



        {/* <View style={styles.bookingSection}>
          <View style={styles.tripTypeContainer}>
            <TouchableOpacity
              style={[
                styles.tripTypeOneWayButton,
                tripType === "One Way Trip" && styles.activeButton,
              ]}
              onPress={() => {
                setTripType("One Way Trip");

              }}
            >
              <Text
                style={[
                  styles.tripTypeText,
                  tripType === "One Way Trip" && styles.activeText,

                ]}
              >
                One Way Trip
              </Text>
            </TouchableOpacity>
            <TouchableOpacity
              style={[
                styles.tripTypeRoundButton,
                tripType === "Return Trip" && styles.activeButton,
              ]}
              onPress={() => {
                setTripType("Return Trip");
              }}
            >
              <Text
                style={[
                  styles.tripTypeText,
                  tripType === "Return Trip" && styles.activeText,

                ]}
              >
                Round Trip
              </Text>
            </TouchableOpacity>
          </View>

          <View style={styles.inputRow}>
            <TouchableOpacity
              onPress={() => {
                setIsLoading(true);
                navigation.navigate('StartingPointScreen', {
                  setStartingPoint: (data) => setStartingPoint(data), // ส่งฟังก์ชันไปยังหน้าจอใหม่
                });
                setIsLoading(false);
              }}
              style={styles.inputBox}
            >
              <Image
                source={require('./assets/directions_boat.png')}
                style={styles.logoDate}
                resizeMode="contain"
              />
              <View >
                <View style={styles.inputBoxCol}>
                  <Text style={styles.inputLabel}>From</Text>
                  <Text style={styles.inputText}> {truncateText(startingPoint.name)}</Text>
                </View>
              </View>
            </TouchableOpacity>

    
            <TouchableOpacity onPress={swapPoints}>
              <Image
                source={require('./assets/mage_exchange-a.png')}
                style={styles.logoSwap}
                resizeMode="contain"
              />
            </TouchableOpacity>

            <TouchableOpacity
              onPress={() => {
                setIsLoading(true);
                navigation.navigate('EndPointScreen', { setEndPoint, startingPointId: startingPoint.id, });
                setIsLoading(false);
              }}
              style={styles.inputBox} >
              <Image
                source={require('./assets/location_on.png')}
                style={styles.logoDate}
                resizeMode="contain"
              />
              <View style={styles.inputBoxCol}>
                <Text style={styles.inputLabel}>To</Text>
                <Text style={styles.inputText}> {truncateText(endPoint.name)}</Text>
              </View>
            </TouchableOpacity>
          </View>



          <View style={styles.inputRow}>

            <View style={styles.inputBox}>
              <TouchableOpacity onPress={() => setShowModal(true)}
                style={[
                  styles.rowdepart,
                  { width: tripType === "One Way Trip" ? wp('68.4%') : 'auto' } // Apply 100% width conditionally
                ]}>

                <Image
                  source={require('./assets/solar_calendar-bold.png')}

                  style={styles.logoDate}
                  resizeMode="contain"
                />
                <View style={styles.inputBoxCol}>

                  <Text style={styles.inputLabel}>Departure date</Text>
                  <Text style={styles.inputText}>
                    {calendarStartDate ? formatDate(calendarStartDate) : "Select Date"}
                  </Text>

                </View>
              </TouchableOpacity>
              {tripType === "Return Trip" && (
                <>

                  <Image
                    source={require('./assets/Line 2.png')}
                    style={styles.logoLine}
                    resizeMode="contain"
                  />
                  <TouchableOpacity onPress={() => setShowModal(true)} disabled={!departureDate}
                    style={styles.rowdepart}>

                    <Image
                      source={require('./assets/solar_calendar-yellow.png')}
                      style={styles.logoDate}
                      resizeMode="contain"
                    />
                    <View style={styles.inputBoxCol}>
                      <Text style={styles.inputLabel}>Return date</Text>
                      <Text style={styles.inputText}>{calendarEndDate ? formatDate(calendarEndDate.toString()) : "Select Date"}</Text>
                    </View>
                  </TouchableOpacity>
                </>
              )}
            </View>

            <Modal visible={showModal} animationType="slide">
              <View style={{ flex: 0.65, backgroundColor: '#fff' }}>


                <View style={{ marginTop: hp('3%'), paddingHorizontal: wp('5%'), paddingBottom: hp('1.5%'), borderBottomWidth: 1, borderBottomColor: '#ddd' }}>
                  <Text style={{ fontSize: wp('5%'), fontWeight: 'bold', marginBottom: hp('1.5%') }}>Select Date</Text>
                  <View style={{ flexDirection: 'row', gap: wp('5%') }}>
                    <View style={{ backgroundColor: '#f2f2f2', padding: wp('2.5%'), borderRadius: wp('2.5%'), flex: 1 }}>
                      <Text style={{ fontSize: wp('3%'), color: '#555' }}>Departure date</Text>
                      <Text style={{ fontSize: wp('4%'), fontWeight: 'bold' }}>{formatDate(calendarStartDate) || '-'}</Text>
                    </View>
                    {tripType === 'Return Trip' && (
                      <View style={{ backgroundColor: '#f2f2f2', padding: wp('2.5%'), borderRadius: wp('2.5%'), flex: 1 }}>
                        <Text style={{ fontSize: wp('3%'), color: '#555' }}>Return date</Text>
                        <Text style={{ fontSize: wp('4%'), fontWeight: 'bold' }}>{formatDate(calendarEndDate) || '-'}</Text>
                      </View>
                    )}
                  </View>
                </View>

                <CalendarList
                  onDayPress={onCalendarDayPress}
                  markedDates={calendarMarkedDates}
                  markingType={'period'}
                  pastScrollRange={0}
                  futureScrollRange={6}
                  scrollEnabled={true}
                  showScrollIndicator={true}
                  minDate={new Date().toISOString().split('T')[0]}
                />

                <View style={{ padding: wp('5%'), borderTopWidth: 1, borderTopColor: '#eee' }}>
                  <TouchableOpacity onPress={handleCalendarConfirm} style={{ backgroundColor: '#FD501E', paddingVertical: hp('2%'), borderRadius: wp('2.5%'), alignItems: 'center' }}>
                    <Text style={{ color: '#fff', fontWeight: 'bold', fontSize: wp('4%') }}>ยืนยัน</Text>
                  </TouchableOpacity>
                </View>
              </View>
            </Modal>




          </View>
        </View> */}



        {/* <TouchableOpacity
          style={styles.searchButton}
          onPress={() => {


            if (startingPoint.id !== '0' && endPoint.id !== '0' && calendarStartDate) {
              setIsLoading(true);
              updateCustomerData({
                startingPointId: startingPoint.id,
                startingpoint_name: startingPoint.name,
                endPointId: endPoint.id,
                endpoint_name: endPoint.name,
                departdate: calendarStartDate,
                returndate: calendarEndDate,
                tripTypeinput: tripType,
              });
              navigation.navigate('SearchFerry');
              setIsLoading(false);
            } else {
              setIsModalVisible(true);
            }
          }}
        >
          <Text style={styles.searchButtonText}>Search</Text>
        </TouchableOpacity>
        <Modal
          visible={isModalVisible}
          transparent={true}
          animationType="fade"
          onRequestClose={() => setIsModalVisible(false)}
        >
          <View style={styles.modalOverlay}>
            <View style={styles.modalContainer}>
              <Text style={styles.modalText}>Please select starting points and destination.</Text>
              <TouchableOpacity
                style={styles.modalButton}
                onPress={() => setIsModalVisible(false)}
              >
                <Text style={styles.modalButtonText}>OK</Text>
              </TouchableOpacity>
            </View>
          </View>
        </Modal> */}
        {/* Refined Hot Deals Section */}
        <View style={premiumStyles.hotDealsSection}>
          <Animated.View style={[premiumStyles.hotDealsContainer, {
            transform: [{ 
              translateX: bounceAnim.interpolate({
                inputRange: [0, 0.25, 0.5, 0.75, 1],
                outputRange: [-3, 0, 5, 0, -3],
              })
            }],
          }]>
            {isLoadingTitle ? (
              <View style={premiumStyles.hotDealsSkeleton}>
                <Animated.View style={[premiumStyles.shimmerEffect, {
                  transform: [{ translateX: shimmerAnim }],
                }]}>
                  <LinearGradient
                    colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                    start={[0, 0]}
                    end={[1, 0]}
                    style={premiumStyles.shimmerGradient}
                  />
                </Animated.View>
              </View>
            ) : (
              <BlurView intensity={50} tint="light" style={premiumStyles.hotDealsBlur}>
                <LinearGradient
                  colors={['rgba(253,80,30,0.92)', 'rgba(255,107,53,0.88)', 'rgba(255,140,80,0.82)']}
                  style={premiumStyles.hotDealsGradient}
                  start={{ x: 0, y: 0 }}
                  end={{ x: 1, y: 0 }}
                >
                  <View style={premiumStyles.hotDealsContent}>
                    <MaterialIcons name="local-fire-department" size={wp('6%')} color="#fff" />
                    <View style={premiumStyles.hotDealsTextContainer}>
                      <Text style={premiumStyles.hotDealsTitle}>
                        Hot <Text style={premiumStyles.hotDealsAccent}>Deals</Text>
                      </Text>
                      <Text style={premiumStyles.hotDealsSubtitle}>Limited Time Offers</Text>
                    </View>
                  </View>
                  
                  {/* Minimal Floating Elements */}
                  <Animated.View style={[premiumStyles.floatingElement1, {
                    transform: [{
                      rotate: bounceAnim.interpolate({
                        inputRange: [0, 1],
                        outputRange: ['0deg', '180deg'],
                      })
                    }]
                  }]}>
                    <MaterialIcons name="star" size={wp('3.5%')} color="rgba(255,255,255,0.25)" />
                  </Animated.View>
                </LinearGradient>
              </BlurView>
            )}
          </Animated.View>
        </View>

        {/* Banner Section with Header-matching Style */}
        <View style={premiumStyles.bannerSection}>
          {isLoadingTitle ? (
            <View style={premiumStyles.bannerSkeleton}>
              <Animated.View style={[premiumStyles.shimmerEffect, {
                transform: [{ translateX: shimmerAnim }],
              }]}>
                <LinearGradient
                  colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                  start={[0, 0]}
                  end={[1, 0]}
                  style={premiumStyles.shimmerGradient}
                />
              </Animated.View>
            </View>
          ) : (
            <View style={premiumStyles.bannerContainer}>
              <BlurView intensity={60} tint="light" style={premiumStyles.bannerBlur}>
                <LinearGradient
                  colors={['rgba(255,255,255,0.92)', 'rgba(255,255,255,0.88)', 'rgba(255,250,246,0.85)']}
                  style={premiumStyles.bannerGradient}
                  start={{ x: 0, y: 0 }}
                  end={{ x: 1, y: 1 }}
                >
                  <View style={premiumStyles.bannerContentWrapper}>
                    <Banner />
                  </View>
                  
                  {/* Floating Decorative Elements */}
                  <View style={premiumStyles.bannerOverlay}>
                    <Animated.View style={[premiumStyles.bannerBadge, {
                      transform: [{ translateY: bounceAnim2.interpolate({
                        inputRange: [0, 1],
                        outputRange: [0, -2],
                      })}]
                    }]}>
                      <LinearGradient
                        colors={['#FFD700', '#FF8C42']}
                        style={premiumStyles.badgeGradient}
                      >
                        <MaterialIcons name="verified" size={wp('3.5%')} color="#fff" />
                        <Text style={premiumStyles.bannerBadgeText}>Featured</Text>
                      </LinearGradient>
                    </Animated.View>
                  </View>
                </LinearGradient>
              </BlurView>
            </View>
          )}
        </View>


        {/* <View style={styles.rowtrip}>
          <View style={styles.coltrip}>

            <Text style={styles.texcol}>Popular</Text>
            <Text style={styles.texcol}><Text style={styles.highlight}>Destination</Text></Text>
            <Text style={styles.Detail}>
              Lorem ipsum odor amet, consectetuer adipiscing elit. Curabitur lectus sodales suspendisse hendrerit eu taciti quis.
              Metus turpis nullam mattis hac orci hendrerit eu phasellus maximus.
            </Text>

            <TouchableOpacity style={styles.PxploreButton}>
              <Text style={styles.searchButtonText}>EXPLORE MORE</Text>
            </TouchableOpacity>


          </View>



          {destinations.slice(0, 1).map((item) => (
            <View style={styles.cardContainerDes} key={item.id}>
              <Image source={item.image} style={styles.cardImage} />
              <View style={styles.cardContent}>
                <Text style={styles.cardTitle}>{item.title}</Text>
                <Text style={styles.cardLocation}><Image source={require('./assets/Iconlocation.png')} /> {item.location}</Text>
                <Text style={styles.cardDuration}><Image source={require('./assets/Icontime.png')} /> {item.duration}</Text>
                <Text style={styles.cardPrice}>Start From <Text style={styles.cardPriceColor}>{item.price}</Text></Text>
              </View>
            </View>
          ))}


        </View> */}


        {isLoadingTitle ? (
          <View
            style={{
              height: hp('4.5%'),
              width: wp('37.5%'),
              borderRadius: wp('6.25%'),
              marginTop: hp('1.5%'),
              marginBottom: hp('1.5%'),
              marginLeft: 0,
              overflow: 'hidden',
              backgroundColor: '#eee',
              alignSelf: 'flex-start',
            }}
          >
            <Animated.View
              style={{
                width: wp('25%'),
                height: '100%',
                transform: [{ translateX: shimmerAnim }],
              }}
            >
              <LinearGradient
                colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                start={[0, 0]}
                end={[1, 0]}
                style={{ width: '100%', height: '100%' }}
              />
            </Animated.View>
          </View>
        ) : (
          <View style={premiumStyles.sectionTitleContainer}>
            <BlurView intensity={40} tint="light" style={premiumStyles.sectionTitleBlur}>
              <LinearGradient
                colors={['rgba(255,255,255,0.9)', 'rgba(255,250,246,0.85)']}
                style={premiumStyles.sectionTitleGradient}
              >
                <Text style={premiumStyles.sectionTitle}>
                  Popular <Text style={premiumStyles.sectionTitleAccent}>Destination</Text>
                </Text>
                <Text style={premiumStyles.sectionSubtitle}>Discover amazing places around the world</Text>
              </LinearGradient>
            </BlurView>
          </View>
        )}

        <View style={premiumStyles.destinationsGrid}>
          {countrie.map((item, index) => {
            const isLoaded = loadedIndexes.includes(index);

            return (
              <View
                key={item.sys_countries_id}
                style={premiumStyles.destinationCard}
              >
                <TouchableOpacity
                  style={premiumStyles.destinationTouchable}
                  onPress={() => {
                    updateCustomerData({
                      countrycode: item.sys_countries_id,
                      country: item.sys_countries_nameeng,
                    });
                    navigation.navigate('PopularDestination');
                  }}
                >
                  <BlurView intensity={20} tint="light" style={premiumStyles.destinationBlur}>
                    <LinearGradient
                      colors={['rgba(255,255,255,0.95)', 'rgba(255,250,246,0.90)']}
                      style={premiumStyles.destinationGradient}
                    >
                      <View style={premiumStyles.destinationImageContainer}>
                        {!isLoaded && (
                          <Animated.View style={premiumStyles.destinationImageSkeleton}>
                            <Animated.View
                              style={[premiumStyles.shimmerEffect, {
                                transform: [{ translateX: shimmerAnim }],
                              }]}
                            >
                              <LinearGradient
                                colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                                start={[0, 0]}
                                end={[1, 0]}
                                style={premiumStyles.shimmerGradient}
                              />
                            </Animated.View>
                          </Animated.View>
                        )}
                        <Image
                          source={{ uri: `https://www.thetrago.com/Api/uploads/countries/index/${item.sys_countries_picname}` }}
                          style={premiumStyles.destinationImage}
                          resizeMode="cover"
                          onLoadEnd={() => setLoadedIndexes((prev) => [...prev, index])}
                        />
                        
                        {/* Premium Overlay */}
                        <LinearGradient
                          colors={['transparent', 'rgba(0,0,0,0.4)']}
                          style={premiumStyles.destinationOverlay}
                        />
                      </View>
                      
                      <View style={premiumStyles.destinationContent}>
                        {!isLoaded ? (
                          <Animated.View style={premiumStyles.destinationTextSkeleton}>
                            <Animated.View
                              style={[premiumStyles.shimmerEffect, {
                                transform: [{ translateX: shimmerAnim }],
                              }]}
                            >
                              <LinearGradient
                                colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                                start={[0, 0]}
                                end={[1, 0]}
                                style={premiumStyles.shimmerGradient}
                              />
                            </Animated.View>
                          </Animated.View>
                        ) : (
                          <>
                            <Text style={premiumStyles.destinationName}>
                              {item.sys_countries_nameeng}
                            </Text>
                            <View style={premiumStyles.destinationMeta}>
                              <MaterialIcons name="place" size={wp('3.5%')} color="#FD501E" />
                              <Text style={premiumStyles.destinationMetaText}>
                                Explore Now
                              </Text>
                            </View>
                          </>
                        )}
                      </View>
                      
                      {/* Hover Indicator */}
                      <View style={premiumStyles.destinationIndicator} />
                    </LinearGradient>
                  </BlurView>
                </TouchableOpacity>
              </View>
            );
          })}
        </View>


        <View style={{
          paddingBottom: hp('6%'),
        }}>
       

               {isLoadingTitle ? (
          <View
            style={{
              height: hp('4.5%'),
              width: wp('37.5%'),
              borderRadius: wp('6.25%'),
              marginTop: hp('1.5%'),
              marginBottom: hp('1.5%'),
              marginLeft: 0,
              overflow: 'hidden',
              backgroundColor: '#eee',
              alignSelf: 'flex-start',
            }}
          >
            <Animated.View
              style={{
                width: wp('25%'),
                height: '100%',
                transform: [{ translateX: shimmerAnim }],
              }}
            >
              <LinearGradient
                colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                start={[0, 0]}
                end={[1, 0]}
                style={{ width: '100%', height: '100%' }}
              />
            </Animated.View>
          </View>
        ) : (
          <View
            style={{
              flexDirection: 'row',
              justifyContent: 'center',
              alignItems: 'center',
              marginHorizontal: wp('2.5%'),
            }}
          >
            <View style={[premiumStyles.sectionTitleContainer, { flex: 1, marginTop: 0, marginBottom: 0 }]}>
              <BlurView intensity={40} tint="light" style={premiumStyles.sectionTitleBlur}>
                <LinearGradient
                  colors={['rgba(255,255,255,0.9)', 'rgba(255,250,246,0.85)']}
                  style={[premiumStyles.sectionTitleGradient, { paddingVertical: wp('2.5%') }]}
                >
                  <Text style={[premiumStyles.sectionTitle, { fontSize: wp('5%'), marginBottom: 0 }]}>
                    Popular <Text style={premiumStyles.sectionTitleAccent}>Route</Text>
                  </Text>
                </LinearGradient>
              </BlurView>
            </View>

            {visibleRoutes < poppularroute.length && (
              <TouchableOpacity onPress={loadMoreRoutes}>
                <Text style={{ color: 'black', fontWeight: 'bold', paddingBottom: hp('2%'), paddingRight: wp('5%') }}>Load More</Text>
              </TouchableOpacity>
            )}
          </View>

        )}

         
          <View style={premiumStyles.tabsSection}>
            <BlurView intensity={30} tint="light" style={premiumStyles.tabsBlur}>
              <LinearGradient
                colors={['rgba(255,255,255,0.9)', 'rgba(255,250,246,0.85)']}
                style={premiumStyles.tabsGradient}
              >
                <View style={premiumStyles.tabContainer}>
                  {countrie.map((item) => (
                    <TouchableOpacity
                      key={item.sys_countries_id}
                      style={[
                        premiumStyles.tab, 
                        activeCountry === item.sys_countries_id && premiumStyles.activeTab
                      ]}
                      onPress={() => {
                        setActiveCountry(item.sys_countries_id);
                        setVisibleRoutes(6);
                      }}
                    >
                      <Text style={[
                        premiumStyles.tabText, 
                        activeCountry === item.sys_countries_id && premiumStyles.activeTabText
                      ]}>
                        {item.sys_countries_nameeng}
                      </Text>
                    </TouchableOpacity>
                  ))}
                </View>
              </LinearGradient>
            </BlurView>
          </View>

          <View style={premiumStyles.routesGrid}>
            {isLoadingTitle
              ? Array(6).fill(null).map((_, index) => (
                <View
                  key={`route-skeleton-${index}`}
                  style={premiumStyles.routeCard}
                >
                  <View style={premiumStyles.routeImageSkeleton}>
                    <Animated.View
                      style={[premiumStyles.shimmerEffect, {
                        transform: [{ translateX: shimmerAnim }],
                      }]}
                    >
                      <LinearGradient
                        colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                        start={[0, 0]}
                        end={[1, 0]}
                        style={premiumStyles.shimmerGradient}
                      />
                    </Animated.View>
                  </View>
                  <View style={premiumStyles.routeTextSkeleton}>
                    <Animated.View
                      style={[premiumStyles.shimmerEffect, {
                        transform: [{ translateX: shimmerAnim }],
                      }]}
                    >
                      <LinearGradient
                        colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                        start={[0, 0]}
                        end={[1, 0]}
                        style={premiumStyles.shimmerGradient}
                      />
                    </Animated.View>
                  </View>
                </View>
              ))
              : poppularroute.slice(0, visibleRoutes).map((item, index) => (
                <View
                  key={item.md_location_id ? `route-${item.md_location_id}` : `route-index-${index}`}
                  style={premiumStyles.routeCard}
                >
                  <TouchableOpacity 
                    style={premiumStyles.routeTouchable}
                    onPress={() => {
                      updateCustomerData({
                        startingPointId: item.md_timetable_startid,
                        startingpoint_name: item.start_location_name,
                        endPointId: item.md_timetable_endid,
                        endpoint_name: item.end_location_name,
                      });
                      navigation.navigate('SearchFerry');
                    }}
                  >
                    <BlurView intensity={20} tint="light" style={premiumStyles.routeBlur}>
                      <LinearGradient
                        colors={['rgba(255,255,255,0.95)', 'rgba(255,250,246,0.90)']}
                        style={premiumStyles.routeGradient}
                      >
                        <View style={premiumStyles.routeImageContainer}>
                          <Image
                            source={{ uri: `https://thetrago.com/Api/uploads/location/pictures/${item.md_location_picname}` }}
                            style={premiumStyles.routeImage}
                            resizeMode="cover"
                          />
                          {index < 2 && (
                            <Animated.View style={[premiumStyles.hotRouteBadge, {
                              transform: [{ translateY: bounceY }],
                            }]}>
                              <LinearGradient
                                colors={['#FF4444', '#FF6666']}
                                style={premiumStyles.badgeGradient}
                              >
                                <Text style={premiumStyles.hotRouteBadgeText}>Hot Route</Text>
                              </LinearGradient>
                            </Animated.View>
                          )}
                          
                          {/* Route Overlay */}
                          <LinearGradient
                            colors={['transparent', 'rgba(0,0,0,0.3)']}
                            style={premiumStyles.routeOverlay}
                          />
                        </View>
                        
                        <View style={premiumStyles.routeContent}>
                          <View style={premiumStyles.routeDirection}>
                            <Text style={premiumStyles.routeLocationText}>
                              {item.start_location_name}
                            </Text>
                            <Ionicons
                              name="arrow-forward"
                              size={wp('3.5%')}
                              color="#FD501E"
                              style={premiumStyles.routeArrow}
                            />
                            <Text style={premiumStyles.routeLocationText}>
                              {item.end_location_name}
                            </Text>
                          </View>
                          
                          <View style={premiumStyles.routeMeta}>
                            <MaterialIcons name="place" size={wp('3%')} color="#999" />
                            <Text style={premiumStyles.routeMetaText}>
                              {item.md_pier_nameeng}
                            </Text>
                          </View>
                        </View>
                        
                        {/* Hover Indicator */}
                        <View style={premiumStyles.routeIndicator} />
                      </LinearGradient>
                    </BlurView>
                  </TouchableOpacity>
                </View>
              ))}
          </View>


        </View>
        <View style={{
          paddingBottom: 10,
          alignSelf: 'flex-start'
        }}>
          <View style={[premiumStyles.sectionTitleContainer, { marginTop: -hp('4%') }]}>
            <BlurView intensity={40} tint="light" style={premiumStyles.sectionTitleBlur}>
              <LinearGradient
                colors={['rgba(255,255,255,0.9)', 'rgba(255,250,246,0.85)']}
                style={premiumStyles.sectionTitleGradient}
              >
                <Text style={premiumStyles.sectionTitle}>
                  Top Trending <Text style={premiumStyles.sectionTitleAccent}>Places</Text>
                </Text>
                <Text style={premiumStyles.sectionSubtitle}>Most popular destinations right now</Text>
              </LinearGradient>
            </BlurView>
          </View>


        </View>
        <View style={styles.carouselContainerTop}>
          {isLoadingTitle ? (
            <View style={{ width: screenWidth, height: hp('22.5%'), borderRadius: wp('5%'), backgroundColor: '#eee', marginBottom: hp('1.25%'), overflow: 'hidden', alignSelf: 'center' }}>
              <Animated.View
                style={{
                  width: 300,
                  height: '100%',
                  transform: [{ translateX: shimmerAnim }],
                }}
              >
                <LinearGradient
                  colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                  start={[0, 0]}
                  end={[1, 0]}
                  style={{ width: '100%', height: '100%' }}
                />
              </Animated.View>
            </View>
          ) : (
            <ScrollView
              ref={scrollViewRef}
              horizontal
              pagingEnabled
              showsHorizontalScrollIndicator={false}
              onMomentumScrollEnd={(event) => {
                const index = Math.round(event.nativeEvent.contentOffset.x / screenWidth);
                setCurrentBanner(index);
              }}
              style={{ width: screenWidth }}
            >
              {toptrending.map((item, index) => (
                <TouchableOpacity
                  key={item.md_location_id || `top-${index}`}
                  onPress={() => {
                    updateCustomerData({
                      startingPointId: item.md_location_id,
                      startingpoint_name: item.md_location_nameeng,
                      countrycode: item.md_location_countriesid,
                      country: item.sys_countries_nameeng,
                    });
                    navigation.navigate('LocationDetail');
                  }}
                >
                  <View key={index} style={styles.itemContainer}>
                    <Image
                      source={{ uri: `https://thetrago.com/Api/uploads/location/pictures/${item.md_location_picname}` }}
                      style={[styles.bannerImage, { width: screenWidth * 0.9 }]}
                      resizeMode="cover"
                    />
                    <Text style={styles.locationName}>{item.sys_countries_nameeng}</Text>
                    <Text style={[styles.locationName, { color: '#c5c5c7' }]}>{item.md_location_nameeng}</Text>
                  </View>
                </TouchableOpacity>
              ))}
            </ScrollView>
          )}
        </View>
        <View style={{
          paddingBottom: hp('2.5%'),
        }}>
          <View style={premiumStyles.sectionTitleContainer}>
            <BlurView intensity={40} tint="light" style={premiumStyles.sectionTitleBlur}>
              <LinearGradient
                colors={['rgba(255,255,255,0.9)', 'rgba(255,250,246,0.85)']}
                style={premiumStyles.sectionTitleGradient}
              >
                <Text style={premiumStyles.sectionTitle}>
                  Popular <Text style={premiumStyles.sectionTitleAccent}>Attraction</Text>
                </Text>
                <Text style={premiumStyles.sectionSubtitle}>Explore the best attractions</Text>
              </LinearGradient>
            </BlurView>
          </View>
          <View style={premiumStyles.tabsSection}>
            <BlurView intensity={30} tint="light" style={premiumStyles.tabsBlur}>
              <LinearGradient
                colors={['rgba(255,255,255,0.9)', 'rgba(255,250,246,0.85)']}
                style={premiumStyles.tabsGradient}
              >
                <View style={premiumStyles.tabContainer}>
                  {attraction.map((item) => (
                    <TouchableOpacity
                      key={item.md_province_id}
                      style={[
                        premiumStyles.tab, 
                        activeattraction === item.md_province_id && premiumStyles.activeTab
                      ]}
                      onPress={() => {
                        setActiveattraction(item.md_province_id);
                      }}
                    >
                      <Text style={[
                        premiumStyles.tabText, 
                        activeattraction === item.md_province_id && premiumStyles.activeTabText
                      ]}>
                        {item.md_province_nameeng}
                      </Text>
                    </TouchableOpacity>
                  ))}
                </View>
              </LinearGradient>
            </BlurView>
          </View>
        </View>
        <View style={premiumStyles.attractionsGrid}>
          {isLoadingTitle
            ? Array(6).fill(null).map((_, index) => (
                <View
                  key={`attraction-skeleton-${index}`}
                  style={premiumStyles.attractionCard}
                >
                  <View style={premiumStyles.attractionImageSkeleton}>
                    <Animated.View
                      style={[premiumStyles.shimmerEffect, {
                        transform: [{ translateX: shimmerAnim }],
                      }]}
                    >
                      <LinearGradient
                        colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                        start={[0, 0]}
                        end={[1, 0]}
                        style={premiumStyles.shimmerGradient}
                      />
                    </Animated.View>
                  </View>
                  <View style={premiumStyles.attractionTextSkeleton}>
                    <Animated.View
                      style={[premiumStyles.shimmerEffect, {
                        transform: [{ translateX: shimmerAnim }],
                      }]}
                    >
                      <LinearGradient
                        colors={['#eeeeee00', '#ddddddaa', '#eeeeee00']}
                        start={[0, 0]}
                        end={[1, 0]}
                        style={premiumStyles.shimmerGradient}
                      />
                    </Animated.View>
                  </View>
                </View>
              ))
            : poppularAttraction.slice(0, visibleAttraction).map((item, index) => (
              <View
                key={item.md_tour_id ? `attraction-${item.md_tour_id}` : `attraction-index-${index}`}
                style={premiumStyles.attractionCard}
              >
                <TouchableOpacity style={premiumStyles.attractionTouchable}>
                  <BlurView intensity={20} tint="light" style={premiumStyles.attractionBlur}>
                    <LinearGradient
                      colors={['rgba(255,255,255,0.95)', 'rgba(255,250,246,0.90)']}
                      style={premiumStyles.attractionGradient}
                    >
                      <View style={premiumStyles.attractionImageContainer}>
                        <Image
                          source={{ uri: `https://tour.thetrago.com/manageadmin/uploads/tour/index/${item.md_tour_picname}` }}
                          style={premiumStyles.attractionImage}
                          resizeMode="cover"
                        />
                        
                        {/* Star Rating Badge */}
                        <View style={premiumStyles.starRatingBadge}>
                          <Ionicons name="star" size={wp('3%')} color="rgb(255, 211, 14)" />
                          <Text style={premiumStyles.starRatingText}>{formatDecimal(item.md_tour_star)}</Text>
                        </View>
                        
                        {/* Attraction Overlay */}
                        <LinearGradient
                          colors={['transparent', 'rgba(0,0,0,0.3)']}
                          style={premiumStyles.attractionOverlay}
                        />
                      </View>
                      
                      <View style={premiumStyles.attractionContent}>
                        <Text style={premiumStyles.attractionTitle}>
                          {truncateText(item.md_tour_name_eng)}
                        </Text>
                        
                        <View style={premiumStyles.attractionMeta}>
                          <View style={premiumStyles.attractionBooking}>
                            <MaterialIcons name="people" size={wp('3')} color="#999" />
                            <Text style={premiumStyles.attractionMetaText}>
                              {item.md_tour_count} booked
                            </Text>
                          </View>
                          
                          <View style={premiumStyles.attractionPrice}>
                            <Text style={premiumStyles.attractionPriceLabel}>start from </Text>
                            <Text style={premiumStyles.attractionPriceValue}>
                              ฿{formatNumberWithComma(item.md_tour_priceadult)}
                            </Text>
                          </View>
                        </View>
                      </View>
                      
                      {/* Hover Indicator */}
                      <View style={premiumStyles.attractionIndicator} />
                    </LinearGradient>
                  </BlurView>
                </TouchableOpacity>
              </View>
            ))}
        </View>
      </ScrollView>
    </SafeAreaView>
  );
};

export default HomeScreen;

// Ultra Premium Styles
const premiumStyles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000',
  },
  backgroundContainer: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    zIndex: -1,
  },
  particlesContainer: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    zIndex: 1,
  },
  particle: {
    position: 'absolute',
    width: 6,
    height: 6,
    borderRadius: 3,
    backgroundColor: 'rgba(255,255,255,0.15)',
  },
  geometricShapes: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    zIndex: 1,
  },
  shape1: {
    position: 'absolute',
    top: hp('15%'),
    right: wp('10%'),
  },
  shape2: {
    position: 'absolute',
    bottom: hp('25%'),
    left: wp('8%'),
  },
  loadingContainer: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    zIndex: 1000,
    justifyContent: 'center',
    alignItems: 'center',
  },
  loadingBlur: {
    flex: 1,
    width: '100%',
    justifyContent: 'center',
    alignItems: 'center',
  },
  loadingContent: {
    alignItems: 'center',
    padding: wp('10%'),
  },
  loadingSpinner: {
    width: wp('20%'),
    height: wp('20%'),
    borderRadius: wp('10%'),
    marginBottom: hp('2.5%'),
    overflow: 'hidden',
  },
  loadingGradient: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
  loadingText: {
    fontSize: wp('4.5%'),
    fontWeight: 'bold',
    color: '#fff',
    marginBottom: hp('1%'),
  },
  loadingSubtext: {
    fontSize: wp('3.5%'),
    color: 'rgba(255,255,255,0.7)',
  },
  scrollContainer: {
    flexGrow: 1,
    paddingBottom: hp('12.5%'),
  },
  headerSection: {
    marginTop: hp('2%'),
    marginHorizontal: wp('3%'),
    borderRadius: wp('6%'),
    overflow: 'hidden',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 6 },
    shadowOpacity: 0.2,
    shadowRadius: 12,
    elevation: 8,
  },
  headerBlur: {
    borderRadius: wp('6%'),
    overflow: 'hidden',
  },
  headerGradient: {
    paddingVertical: hp('2.5%'),
    paddingHorizontal: wp('4%'),
    position: 'relative',
  },
  headerContent: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: hp('1.5%'),
  },
  headerActionsLeft: {
    width: wp('12%'),
    alignItems: 'flex-start',
    justifyContent: 'center',
  },
  headerActionsRight: {
    width: wp('12%'),
    alignItems: 'flex-end',
    justifyContent: 'center',
  },
  logoContainer: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    position: 'relative',
  },
  logoWrapper: {
    position: 'relative',
    alignItems: 'center',
    justifyContent: 'center',
  },
  premiumBadge: {
    position: 'absolute',
    top: -hp('0.8%'),
    right: -wp('6%'),
    borderRadius: wp('2.5%'),
    overflow: 'hidden',
  },
  badgeGradient: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingHorizontal: wp('1.5%'),
    paddingVertical: hp('0.4%'),
    borderRadius: wp('2.5%'),
  },
  badgeText: {
    fontSize: wp('2.2%'),
    fontWeight: 'bold',
    color: '#fff',
    marginLeft: wp('0.8%'),
  },
  notificationButton: {
    borderRadius: 18,
    overflow: 'hidden',
  },
  profileButton: {
    borderRadius: 18,
    overflow: 'hidden',
  },
  actionButtonBlur: {
    padding: 8,
    borderRadius: 18,
    alignItems: 'center',
    justifyContent: 'center',
    position: 'relative',
  },
  notificationDot: {
    position: 'absolute',
    top: 4,
    right: 4,
    width: 6,
    height: 6,
    borderRadius: 3,
    backgroundColor: '#FF4444',
  },
  searchSection: {
    marginTop: hp('0.5%'),
  },
  searchSkeleton: {
    height: 50,
    borderRadius: 25,
    backgroundColor: '#eee',
    overflow: 'hidden',
  },
  searchContainer: {
    borderRadius: 25,
    overflow: 'hidden',
    shadowColor: '#FD501E',
    shadowOffset: { width: 0, height: 3 },
    shadowOpacity: 0.15,
    shadowRadius: 6,
    elevation: 5,
  },
  searchGradient: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: 12,
    paddingHorizontal: 16,
  },
  searchIconContainer: {
    marginRight: 12,
  },
  searchInputContainer: {
    flex: 1,
    position: 'relative',
    height: 26,
    justifyContent: 'center',
  },
  searchPlaceholder: {
    position: 'absolute',
    width: '100%',
    fontSize: wp('3.5%'),
  },
  placeholderText: {
    fontWeight: '500',
  },
  searchInput: {
    height: 26,
    fontSize: wp('3.5%'),
    color: '#333',
    paddingVertical: 0,
  },
  filterButton: {
    marginLeft: 12,
    padding: 4,
  },
  headerDecorations: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    zIndex: -1,
  },
  headerDecor1: {
    position: 'absolute',
    top: -20,
    right: -20,
    width: 100,
    height: 100,
    borderRadius: 50,
    backgroundColor: 'rgba(253,80,30,0.1)',
  },
  headerDecor2: {
    position: 'absolute',
    bottom: -30,
    left: -30,
    width: 80,
    height: 80,
    borderRadius: 40,
    backgroundColor: 'rgba(255,107,53,0.08)',
  },
  shimmerEffect: {
    width: 200,
    height: '100%',
  },
  shimmerGradient: {
    width: '100%',
    height: '100%',
  },
  servicesSection: {
    marginTop: hp('1.5%'),
    marginHorizontal: wp('3%'),
  },
  servicesContainer: {
    borderRadius: 20,
    overflow: 'hidden',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 5 },
    shadowOpacity: 0.1,
    shadowRadius: 10,
    elevation: 6,
  },
  servicesBlur: {
    borderRadius: 20,
    overflow: 'hidden',
  },
  servicesGradient: {
    paddingVertical: hp('2.5%'),
    paddingHorizontal: wp('4%'),
  },
  servicesTitleContainer: {
    alignItems: 'center',
    marginBottom: hp('1.5%'),
  },
  servicesTitle: {
    fontSize: wp('5%'),
    fontWeight: 'bold',
    color: '#2d3748',
    marginBottom: hp('0.8%'),
  },
  servicesSubtitle: {
    fontSize: wp('3.5%'),
    color: '#718096',
    fontStyle: 'italic',
  },
  servicesGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'space-between',
  },
  serviceItemContainer: {
    width: '23.5%',
    marginBottom: hp('1.5%'),
  },
  serviceSkeleton: {
    alignItems: 'center',
  },
  serviceSkeletonIcon: {
    width: wp('14%'),
    height: wp('14%'),
    borderRadius: wp('7%'),
    backgroundColor: '#eee',
    overflow: 'hidden',
    marginBottom: 8,
  },
  serviceSkeletonText: {
    height: 12,
    width: 40,
    borderRadius: 6,
    backgroundColor: '#eee',
    overflow: 'hidden',
  },
  serviceItem: {
    borderRadius: 16,
    overflow: 'hidden',
    shadowColor: '#FD501E',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 3,
  },
  serviceItemBlur: {
    borderRadius: 16,
    overflow: 'hidden',
  },
  serviceItemGradient: {
    alignItems: 'center',
    paddingVertical: 16,
    paddingHorizontal: 12,
    position: 'relative',
  },
  serviceBadge: {
    position: 'absolute',
    top: 6,
    right: 6,
    borderRadius: 8,
    overflow: 'hidden',
    zIndex: 10,
  },
  serviceIconContainer: {
    width: 42,
    height: 42,
    borderRadius: 21,
    backgroundColor: 'rgba(253,80,30,0.1)',
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: 8,
  },
  serviceItemText: {
    fontSize: wp('2.8%'),
    fontWeight: '600',
    color: '#2d3748',
    textAlign: 'center',
  },
  hoverIndicator: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    height: 2,
    backgroundColor: '#FD501E',
    borderRadius: 1,
  },
  hotDealsSection: {
    marginTop: hp('1.5%'),
    marginHorizontal: wp('3%'),
  },
  hotDealsContainer: {
    borderRadius: 20,
    overflow: 'hidden',
    shadowColor: '#FD501E',
    shadowOffset: { width: 0, height: 5 },
    shadowOpacity: 0.2,
    shadowRadius: 10,
    elevation: 8,
  },
  hotDealsSkeleton: {
    height: 50,
    borderRadius: 20,
    backgroundColor: '#eee',
    overflow: 'hidden',
  },
  hotDealsBlur: {
    borderRadius: 20,
    overflow: 'hidden',
  },
  hotDealsGradient: {
    paddingVertical: 14,
    paddingHorizontal: 20,
    position: 'relative',
  },
  hotDealsContent: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'flex-start',
  },
  hotDealsTextContainer: {
    marginLeft: wp('2.5%'),
    flex: 1,
  },
  hotDealsTitle: {
    fontSize: wp('5%'),
    fontWeight: 'bold',
    color: '#fff',
    marginBottom: wp('0.5%'),
  },
  hotDealsAccent: {
    color: 'rgba(255,255,255,0.85)',
    fontStyle: 'italic',
  },
  hotDealsSubtitle: {
    fontSize: wp('2.8%'),
    color: 'rgba(255,255,255,0.9)',
    fontWeight: '600',
  },
  floatingElement1: {
    position: 'absolute',
    top: 6,
    right: 50,
  },
  floatingElement2: {
    position: 'absolute',
    bottom: 8,
    left: 80,
  },
  bannerSection: {
    marginTop: hp('1.5%'),
    marginHorizontal: wp('3%'),
  },
  bannerSkeleton: {
    height: hp('20%'),
    borderRadius: wp('4.5%'),
    backgroundColor: 'rgba(253,80,30,0.1)',
    overflow: 'hidden',
  },
  bannerContainer: {
    borderRadius: wp('4.5%'),
    overflow: 'hidden',
    shadowColor: '#FD501E',
    shadowOffset: { width: 0, height: 6 },
    shadowOpacity: 0.15,
    shadowRadius: 12,
    elevation: 10,
  },
  bannerBlur: {
    borderRadius: wp('4.5%'),
    overflow: 'hidden',
  },
  bannerGradient: {
    position: 'relative',
  },
  bannerContentWrapper: {
    paddingHorizontal: wp('5%'),
    paddingVertical: wp('3%'),
  },
  bannerOverlay: {
    position: 'absolute',
    top: wp('3%'),
    right: wp('3%'),
  },
  bannerBadge: {
    borderRadius: wp('3%'),
    overflow: 'hidden',
    shadowColor: '#FFD700',
    shadowOffset: { width: 0, height: hp('0.4%') },
    shadowOpacity: 0.25,
    shadowRadius: wp('1.5%'),
    elevation: 6,
  },
  bannerBadgeText: {
    fontSize: wp('2.8%'),
    fontWeight: 'bold',
    color: '#fff',
    marginLeft: wp('1.25%'),
  },
  
  // Section Title Styles
  sectionTitleContainer: {
    marginTop: hp('1.5%'),
    marginBottom: hp('1.5%'),
    marginHorizontal: wp('2.5%'),
  },
  sectionTitleBlur: {
    borderRadius: wp('4%'),
    overflow: 'hidden',
  },
  sectionTitleGradient: {
    paddingHorizontal: wp('5%'),
    paddingVertical: wp('3%'),
  },
  sectionTitle: {
    fontSize: wp('5.5%'),
    fontWeight: 'bold',
    color: '#333',
    textAlign: 'left',
    marginBottom: hp('0.5%'),
  },
  sectionTitleAccent: {
    color: '#FD501E',
  },
  sectionSubtitle: {
    fontSize: wp('3.5%'),
    color: '#666',
    fontWeight: '500',
    textAlign: 'left',
  },
  
  // Destination Cards Styles
  destinationsGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'space-between',
    paddingHorizontal: wp('2.5%'),
    marginTop: hp('1%'),
  },
  destinationCard: {
    width: wp('30%'), // Using responsive width
    marginBottom: hp('2%'),
  },
  destinationTouchable: {
    width: '100%',
  },
  destinationBlur: {
    borderRadius: wp('3%'), // More responsive border radius
    overflow: 'hidden',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: hp('0.3%') },
    shadowOpacity: 0.1,
    shadowRadius: wp('1.5%'),
    elevation: 4,
  },
  destinationGradient: {
    position: 'relative',
  },
  destinationImageContainer: {
    width: '100%',
    height: wp('25%'), // Using width-based responsive height for better aspect ratio
    position: 'relative',
    borderTopLeftRadius: wp('3%'),
    borderTopRightRadius: wp('3%'),
    overflow: 'hidden',
  },
  destinationImageSkeleton: {
    ...StyleSheet.absoluteFillObject,
    backgroundColor: '#eee',
    borderTopLeftRadius: wp('3%'),
    borderTopRightRadius: wp('3%'),
    overflow: 'hidden',
  },
  destinationImage: {
    width: '100%',
    height: '100%',
  },
  destinationOverlay: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    height: '40%',
  },
  destinationContent: {
    padding: wp('2.5%'), // More responsive padding
    paddingTop: wp('2%'),
    paddingBottom: wp('2.5%'),
    minHeight: wp('12%'), // Using width-based min height for consistency
  },
  destinationTextSkeleton: {
    height: wp('4%'), // Width-based height
    borderRadius: wp('1%'),
    backgroundColor: '#eee',
    overflow: 'hidden',
  },
  destinationName: {
    fontSize: wp('3.2%'), // Slightly smaller font for better fit
    fontWeight: 'bold',
    color: '#333',
    marginBottom: wp('1%'),
    textAlign: 'center', // Center align for better look
  },
  destinationMeta: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center', // Center the explore button
    marginTop: wp('0.5%'),
  },
  destinationMetaText: {
    fontSize: wp('2.8%'), // Smaller font for better fit
    color: '#FD501E',
    fontWeight: '600',
    marginLeft: wp('1%'),
  },
  destinationIndicator: {
    position: 'absolute',
    bottom: 0,
    left: '50%',
    transform: [{ translateX: -wp('1%') }],
    width: wp('2%'),
    height: wp('0.5%'), // Width-based height for consistency
    backgroundColor: '#FD501E',
    borderTopLeftRadius: wp('1%'),
    borderTopRightRadius: wp('1%'),
  },

  // Tabs Section Styles
  tabsSection: {
    marginVertical: hp('1%'),
    marginHorizontal: wp('2.5%'),
  },
  tabsBlur: {
    borderRadius: wp('4%'),
    overflow: 'hidden',
  },
  tabsGradient: {
    paddingVertical: wp('2.5%'),
    paddingHorizontal: wp('1%'),
  },
  tabContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'center',
    gap: wp('2%'),
  },
  tab: {
    paddingHorizontal: wp('4%'),
    paddingVertical: wp('2%'),
    borderRadius: wp('6%'),
    backgroundColor: 'rgba(253,80,30,0.1)',
    borderWidth: 1,
    borderColor: 'rgba(253,80,30,0.2)',
  },
  activeTab: {
    backgroundColor: '#FD501E',
    borderColor: '#FD501E',
  },
  tabText: {
    fontSize: wp('3.2%'),
    fontWeight: '600',
    color: '#FD501E',
  },
  activeTabText: {
    color: '#fff',
    fontWeight: 'bold',
  },

  // Routes Grid Styles
  routesGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'flex-start',
    paddingHorizontal: wp('2.5%'),
    marginTop: hp('2%'),
  },
  routeCard: {
    width: '33%',
    marginBottom: hp('2%'),
    paddingHorizontal: wp('1%'),
  },
  routeTouchable: {
    borderRadius: wp('3%'),
    overflow: 'hidden',
  },
  routeBlur: {
    borderRadius: wp('3%'),
    overflow: 'hidden',
  },
  routeGradient: {
    borderRadius: wp('3%'),
  },
  routeImageContainer: {
    width: '100%',
    height: hp('18%'),
    position: 'relative',
  },
  routeImage: {
    width: '100%',
    height: '100%',
    borderTopLeftRadius: wp('3%'),
    borderTopRightRadius: wp('3%'),
  },
  routeImageSkeleton: {
    width: '100%',
    height: hp('18%'),
    backgroundColor: '#eee',
    borderTopLeftRadius: wp('3%'),
    borderTopRightRadius: wp('3%'),
    overflow: 'hidden',
  },
  routeOverlay: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    height: '40%',
    borderTopLeftRadius: wp('3%'),
    borderTopRightRadius: wp('3%'),
  },
  hotRouteBadge: {
    position: 'absolute',
    left: wp('2%'),
    bottom: wp('2%'),
    borderRadius: wp('3%'),
    overflow: 'hidden',
  },
  hotRouteBadgeText: {
    color: '#fff',
    fontWeight: 'bold',
    fontSize: wp('2.5%'),
    paddingHorizontal: wp('2%'),
    paddingVertical: wp('1%'),
  },
  routeContent: {
    padding: wp('2.5%'),
  },
  routeDirection: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    flexWrap: 'wrap',
    marginBottom: wp('1%'),
  },
  routeLocationText: {
    fontSize: wp('2.8%'),
    fontWeight: 'bold',
    color: '#333',
    textAlign: 'center',
  },
  routeArrow: {
    marginHorizontal: wp('1%'),
  },
  routeMeta: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
  },
  routeMetaText: {
    fontSize: wp('2.6%'),
    color: '#999',
    marginLeft: wp('0.5%'),
    fontWeight: '500',
  },
  routeTextSkeleton: {
    height: wp('4%'),
    marginTop: wp('1.5%'),
    marginHorizontal: wp('2%'),
    borderRadius: wp('2%'),
    backgroundColor: '#eee',
    overflow: 'hidden',
  },
  routeIndicator: {
    position: 'absolute',
    bottom: 0,
    left: '50%',
    transform: [{ translateX: -wp('1%') }],
    width: wp('2%'),
    height: wp('0.5%'),
    backgroundColor: '#FD501E',
    borderTopLeftRadius: wp('1%'),
    borderTopRightRadius: wp('1%'),
  },

  // Attractions Grid Styles
  attractionsGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'flex-start',
    paddingHorizontal: wp('2.5%'),
    marginTop: hp('1%'),
  },
  attractionCard: {
    width: '33%',
    marginBottom: hp('2%'),
    paddingHorizontal: wp('1%'),
  },
  attractionTouchable: {
    borderRadius: wp('3%'),
    overflow: 'hidden',
  },
  attractionBlur: {
    borderRadius: wp('3%'),
    overflow: 'hidden',
  },
  attractionGradient: {
    borderRadius: wp('3%'),
  },
  attractionImageContainer: {
    width: '100%',
    height: hp('18%'),
    position: 'relative',
  },
  attractionImage: {
    width: '100%',
    height: '100%',
    borderTopLeftRadius: wp('3%'),
    borderTopRightRadius: wp('3%'),
  },
  attractionImageSkeleton: {
    width: '100%',
    height: hp('18%'),
    backgroundColor: '#eee',
    borderTopLeftRadius: wp('3%'),
    borderTopRightRadius: wp('3%'),
    overflow: 'hidden',
  },
  attractionOverlay: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    height: '40%',
    borderTopLeftRadius: wp('3%'),
    borderTopRightRadius: wp('3%'),
  },
  starRatingBadge: {
    position: 'absolute',
    top: wp('2%'),
    left: '50%',
    transform: [{ translateX: -wp('6%') }],
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: 'rgba(0,0,0,0.6)',
    borderRadius: wp('3%'),
    paddingHorizontal: wp('2%'),
    paddingVertical: wp('1%'),
  },
  starRatingText: {
    color: '#fff',
    fontWeight: 'bold',
    fontSize: wp('2.5%'),
    marginLeft: wp('0.5%'),
  },
  attractionContent: {
    padding: wp('2.5%'),
  },
  attractionTitle: {
    fontSize: wp('2.8%'),
    fontWeight: 'bold',
    color: '#333',
    textAlign: 'center',
    marginBottom: wp('1.5%'),
  },
  attractionMeta: {
    gap: wp('1%'),
  },
  attractionBooking: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: wp('0.5%'),
  },
  attractionPrice: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    flexWrap: 'wrap',
  },
  attractionMetaText: {
    fontSize: wp('2.6%'),
    color: '#999',
    marginLeft: wp('0.5%'),
    fontWeight: '500',
  },
  attractionPriceLabel: {
    fontSize: wp('2.6%'),
    color: '#999',
    fontWeight: '500',
  },
  attractionPriceValue: {
    fontSize: wp('2.6%'),
    color: '#FD501E',
    fontWeight: 'bold',
  },
  attractionTextSkeleton: {
    height: wp('4%'),
    marginTop: wp('1.5%'),
    marginHorizontal: wp('2%'),
    borderRadius: wp('2%'),
    backgroundColor: '#eee',
    overflow: 'hidden',
  },
  attractionIndicator: {
    position: 'absolute',
    bottom: 0,
    left: '50%',
    transform: [{ translateX: -wp('1%') }],
    width: wp('2%'),
    height: wp('0.5%'),
    backgroundColor: '#FD501E',
    borderTopLeftRadius: wp('1%'),
    borderTopRightRadius: wp('1%'),
  },
});

